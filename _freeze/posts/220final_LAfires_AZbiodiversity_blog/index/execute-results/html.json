{
  "hash": "2b16d88fe21c183a9e0883f570f80a18",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"LA Fires\"\ndescription: \"Remote sensing and equity insights for the 2025 Eaton and Palisades wildfires.\"\nauthor: \n  - name: Lucian Blue Scher\n    url: https://lucianbluescher.github.io\n    affiliation: Master of Environmental Data Science Program @ The Bren School (UCSB) \n    affiliation-url: https://ucsb-meds.github.io/ \ndate: 12-12-2025\ncategories: [MEDS, R, Python]\nimage: images/landsat_false_perimeter.png\nbibliography: references.bib\neditor_options: \n  chunk_output_type: inline\njupyter: eds220-env\nexecute:\n  kernel: eds220-env\n  python:\n    path: /opt/anaconda3/envs/eds220-env/bin/python\n---\n\n[Full analysis on GitHub](https://github.com/lucianbluescher/lucianbluescher.github.io/tree/main/posts/220final_LAfires_AZbiodiversity_blog)\n\n## About this Post\n\nThe Eaton and Palisades Fires reshaped large swaths of the Los Angeles foothills in early 2025. This post summarizes a remote-sensing workflow that converts Landsat 8 surface reflectance into both true- and false-color composites, overlays official fire perimeters, and links the impacted footprints to the EPA’s Environmental Justice Index (EJI) to highlight socially vulnerable neighborhoods caught within the burn scars.\n\n![](images/landsat_false_perimeter.png){fig-alt=\"False color map of the Los Angeles area highlighting Eaton and Palisades fire perimeters\"}\n\n## Highlights\n\n- Fire perimeter processing and Landsat feature engineering using `pandas`, `geopandas`, `numpy`, and `xarray`.\n- CRS restoration and reprojection to align raster and vector assets for accurate overlays.\n- True- and false-color visualization with `matplotlib`, emphasizing burn severity via SWIR/NIR combinations.\n- Environmental Justice Index joins that compare poverty exposure inside each fire footprint.\n\n## Datasets and References\n\n1. Palisades & Eaton dissolved fire perimeters, Fire Integrated Real-time Intelligence System (FIRIS) via Los Angeles County NIFC ArcGIS Online (accessed 2025-12-22).  \n2. Landsat 8 Collection 2 Level-2 surface reflectance (bands: red, green, blue, NIR, SWIR) via Microsoft Planetary Computer; clipped to the study area prior to download (accessed 2025-11-22).  \n3. Environmental Justice Index 2024 California geodatabase (EPA).  \n\nAdditional background references are listed in `references.bib` (NASA/USGS band guides and Landsat documentation).\n\n## Analysis Overview\n\n### Libraries and Data Ingest\n\nWe load the Python libraries used for tabular wrangling, geospatial analysis, and visualization.\n\n::: {#6418262a .cell execution_count=1}\n``` {.python .cell-code}\nimport pandas as pd\nimport numpy as np\nimport os\nimport geopandas as gpd\nimport xarray as xr\nimport matplotlib.pyplot as plt\nimport contextily as ctx\n```\n:::\n\n\nNext we read the Eaton and Palisades perimeter shapefiles plus the clipped Landsat NetCDF scene.\n\n::: {#e22f044b .cell execution_count=2}\n``` {.python .cell-code}\nfp = os.path.join('~/Desktop/MEDS/lucianbluescher.github.io/posts/220final_LAfires_AZbiodiversity_blog/data/Eaton_Perimeter_20250121/Eaton_Perimeter_20250121.shp')\neaton = gpd.read_file(fp)\n\nfp = os.path.join('~/Desktop/MEDS/lucianbluescher.github.io/posts/220final_LAfires_AZbiodiversity_blog/data/Palisades_Perimeter_20250121/Palisades_Perimeter_20250121.shp')\npalisades = gpd.read_file(fp)\n\nlandsat = xr.open_dataset(\"~/Desktop/MEDS/lucianbluescher.github.io/posts/220final_LAfires_AZbiodiversity_blog/data/landsat8-2025-02-23-palisades-eaton.nc\", engine=\"netcdf4\")\n```\n:::\n\n\n### Quick Data Checks\n\nWe verify CRS metadata and inspect the Landsat dimensions/variables so the next steps know what to expect.\n\n::: {#136e6b2d .cell execution_count=3}\n``` {.python .cell-code}\n# Fire perimeter data exploration\nprint(f\"The CRS for the Eaton Perimeter is {eaton.crs}\")\nprint(f\"The CRS for the Palisades Perimeter is {palisades.crs}\")\nprint(f\"The Eaton Perimeter is projected: {eaton.crs.is_projected}\")\nprint(f\"The Palisades Perimeter is projected: {palisades.crs.is_projected}\")\neaton.info()\npalisades.info()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nThe CRS for the Eaton Perimeter is EPSG:3857\nThe CRS for the Palisades Perimeter is EPSG:3857\nThe Eaton Perimeter is projected: True\nThe Palisades Perimeter is projected: True\n<class 'geopandas.geodataframe.GeoDataFrame'>\nRangeIndex: 20 entries, 0 to 19\nData columns (total 5 columns):\n #   Column      Non-Null Count  Dtype   \n---  ------      --------------  -----   \n 0   OBJECTID    20 non-null     int64   \n 1   type        20 non-null     object  \n 2   Shape__Are  20 non-null     float64 \n 3   Shape__Len  20 non-null     float64 \n 4   geometry    20 non-null     geometry\ndtypes: float64(2), geometry(1), int64(1), object(1)\nmemory usage: 932.0+ bytes\n<class 'geopandas.geodataframe.GeoDataFrame'>\nRangeIndex: 21 entries, 0 to 20\nData columns (total 5 columns):\n #   Column      Non-Null Count  Dtype   \n---  ------      --------------  -----   \n 0   OBJECTID    21 non-null     int64   \n 1   type        21 non-null     object  \n 2   Shape__Are  21 non-null     float64 \n 3   Shape__Len  21 non-null     float64 \n 4   geometry    21 non-null     geometry\ndtypes: float64(2), geometry(1), int64(1), object(1)\nmemory usage: 972.0+ bytes\n```\n:::\n:::\n\n\n::: {#594b4efa .cell execution_count=4}\n``` {.python .cell-code}\n# Landsat Exploration\nprint(landsat.coords) # View coordinates\nprint(landsat.var) # View Variables\nprint(landsat.dims) # View Dimensions\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nCoordinates:\n  * y        (y) float64 11kB 3.799e+06 3.799e+06 ... 3.757e+06 3.757e+06\n  * x        (x) float64 22kB 3.344e+05 3.344e+05 ... 4.166e+05 4.166e+05\n    time     datetime64[ns] 8B ...\n<bound method DatasetAggregations.var of <xarray.Dataset> Size: 78MB\nDimensions:      (y: 1418, x: 2742)\nCoordinates:\n  * y            (y) float64 11kB 3.799e+06 3.799e+06 ... 3.757e+06 3.757e+06\n  * x            (x) float64 22kB 3.344e+05 3.344e+05 ... 4.166e+05 4.166e+05\n    time         datetime64[ns] 8B ...\nData variables:\n    red          (y, x) float32 16MB ...\n    green        (y, x) float32 16MB ...\n    blue         (y, x) float32 16MB ...\n    nir08        (y, x) float32 16MB ...\n    swir22       (y, x) float32 16MB ...\n    spatial_ref  int64 8B ...>\nFrozenMappingWarningOnValuesAccess({'y': 1418, 'x': 2742})\n```\n:::\n:::\n\n\nBoth perimeters share a projected CRS and schema, while Landsat arrives as an array with georeferencing stored in `spatial_ref`.\n\n### Restoring Raster CRS Metadata\n\nBecause `xarray` sometimes drops CRS info, we explicitly write it back so raster/vector overlays align perfectly.\n\n::: {#6d1d40dd .cell execution_count=5}\n``` {.python .cell-code}\n# Check landsat CRS\nprint(landsat.rio.crs)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nNone\n```\n:::\n:::\n\n\n::: {#bda4a1d6 .cell execution_count=6}\n``` {.python .cell-code}\n# Print the CRS of landsat\nprint(landsat.spatial_ref.crs_wkt)\nlandsat_crs = landsat.spatial_ref.crs_wkt\n\n#Recover the geospatial information by using rio.write_crs() \nlandsat = landsat.rio.write_crs(landsat_crs)\n\n#Print the CRS of the updated dataset.#\nprint(landsat.rio.crs)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nPROJCS[\"WGS 84 / UTM zone 11N\",GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4326\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",-117],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH],AUTHORITY[\"EPSG\",\"32611\"]]\nEPSG:32611\n```\n:::\n:::\n\n\n### True-Color Rendering\n\nWe start with a raw RGB composite to establish visual context, then clean nodata values for a clearer view.\n\n::: {#712ea0bf .cell execution_count=7}\n``` {.python .cell-code}\n# Select red, green and blue variables and plot as a numpy.array\nlandsat[[\"red\", \"green\", \"blue\"]].to_array().plot.imshow(vmin = 7000, vmax = 15000)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n/opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/matplotlib/cm.py:478: RuntimeWarning: invalid value encountered in cast\n  xx = (xx * 255).astype(np.uint8)\n```\n:::\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-8-output-2.png){width=621 height=464}\n:::\n:::\n\n\n::: {#20f2d89a .cell execution_count=8}\n``` {.python .cell-code}\n# Adjust vmin and max and add robust parameter to get a true color image\nlandsat[[\"red\", \"green\", \"blue\"]].to_array().plot.imshow(vmin = 8200, vmax = 13500, robust = True)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n/opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/matplotlib/cm.py:478: RuntimeWarning: invalid value encountered in cast\n  xx = (xx * 255).astype(np.uint8)\n```\n:::\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-9-output-2.png){width=621 height=464}\n:::\n:::\n\n\n::: {#9a701ea3 .cell execution_count=9}\n``` {.python .cell-code}\n# Check for nan values in each column\nfor band in landsat.data_vars:\n    print(band, landsat[band].isnull().any().item())\n\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nred False\ngreen True\nblue True\nnir08 False\nswir22 False\n```\n:::\n:::\n\n\n::: {#d45aec81 .cell execution_count=10}\n``` {.python .cell-code}\n# Identify which values are nan using\nnp.isnan(landsat)\n```\n\n::: {.cell-output .cell-output-display execution_count=10}\n```{=html}\n<div><svg style=\"position: absolute; width: 0; height: 0; overflow: hidden\">\n<defs>\n<symbol id=\"icon-database\" viewBox=\"0 0 32 32\">\n<path d=\"M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z\"></path>\n<path d=\"M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n<path d=\"M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n</symbol>\n<symbol id=\"icon-file-text2\" viewBox=\"0 0 32 32\">\n<path d=\"M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z\"></path>\n<path d=\"M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n</symbol>\n</defs>\n</svg>\n<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.\n *\n */\n\n:root {\n  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));\n  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));\n  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));\n  --xr-border-color: var(--jp-border-color2, #e0e0e0);\n  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);\n  --xr-background-color: var(--jp-layout-color0, white);\n  --xr-background-color-row-even: var(--jp-layout-color1, white);\n  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);\n}\n\nhtml[theme=dark],\nhtml[data-theme=dark],\nbody[data-theme=dark],\nbody.vscode-dark {\n  --xr-font-color0: rgba(255, 255, 255, 1);\n  --xr-font-color2: rgba(255, 255, 255, 0.54);\n  --xr-font-color3: rgba(255, 255, 255, 0.38);\n  --xr-border-color: #1F1F1F;\n  --xr-disabled-color: #515151;\n  --xr-background-color: #111111;\n  --xr-background-color-row-even: #111111;\n  --xr-background-color-row-odd: #313131;\n}\n\n.xr-wrap {\n  display: block !important;\n  min-width: 300px;\n  max-width: 700px;\n}\n\n.xr-text-repr-fallback {\n  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */\n  display: none;\n}\n\n.xr-header {\n  padding-top: 6px;\n  padding-bottom: 6px;\n  margin-bottom: 4px;\n  border-bottom: solid 1px var(--xr-border-color);\n}\n\n.xr-header > div,\n.xr-header > ul {\n  display: inline;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.xr-obj-type,\n.xr-array-name {\n  margin-left: 2px;\n  margin-right: 10px;\n}\n\n.xr-obj-type {\n  color: var(--xr-font-color2);\n}\n\n.xr-sections {\n  padding-left: 0 !important;\n  display: grid;\n  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;\n}\n\n.xr-section-item {\n  display: contents;\n}\n\n.xr-section-item input {\n  display: inline-block;\n  opacity: 0;\n}\n\n.xr-section-item input + label {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-item input:enabled + label {\n  cursor: pointer;\n  color: var(--xr-font-color2);\n}\n\n.xr-section-item input:focus + label {\n  border: 2px solid var(--xr-font-color0);\n}\n\n.xr-section-item input:enabled + label:hover {\n  color: var(--xr-font-color0);\n}\n\n.xr-section-summary {\n  grid-column: 1;\n  color: var(--xr-font-color2);\n  font-weight: 500;\n}\n\n.xr-section-summary > span {\n  display: inline-block;\n  padding-left: 0.5em;\n}\n\n.xr-section-summary-in:disabled + label {\n  color: var(--xr-font-color2);\n}\n\n.xr-section-summary-in + label:before {\n  display: inline-block;\n  content: '►';\n  font-size: 11px;\n  width: 15px;\n  text-align: center;\n}\n\n.xr-section-summary-in:disabled + label:before {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-summary-in:checked + label:before {\n  content: '▼';\n}\n\n.xr-section-summary-in:checked + label > span {\n  display: none;\n}\n\n.xr-section-summary,\n.xr-section-inline-details {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n.xr-section-inline-details {\n  grid-column: 2 / -1;\n}\n\n.xr-section-details {\n  display: none;\n  grid-column: 1 / -1;\n  margin-bottom: 5px;\n}\n\n.xr-section-summary-in:checked ~ .xr-section-details {\n  display: contents;\n}\n\n.xr-array-wrap {\n  grid-column: 1 / -1;\n  display: grid;\n  grid-template-columns: 20px auto;\n}\n\n.xr-array-wrap > label {\n  grid-column: 1;\n  vertical-align: top;\n}\n\n.xr-preview {\n  color: var(--xr-font-color3);\n}\n\n.xr-array-preview,\n.xr-array-data {\n  padding: 0 5px !important;\n  grid-column: 2;\n}\n\n.xr-array-data,\n.xr-array-in:checked ~ .xr-array-preview {\n  display: none;\n}\n\n.xr-array-in:checked ~ .xr-array-data,\n.xr-array-preview {\n  display: inline-block;\n}\n\n.xr-dim-list {\n  display: inline-block !important;\n  list-style: none;\n  padding: 0 !important;\n  margin: 0;\n}\n\n.xr-dim-list li {\n  display: inline-block;\n  padding: 0;\n  margin: 0;\n}\n\n.xr-dim-list:before {\n  content: '(';\n}\n\n.xr-dim-list:after {\n  content: ')';\n}\n\n.xr-dim-list li:not(:last-child):after {\n  content: ',';\n  padding-right: 5px;\n}\n\n.xr-has-index {\n  font-weight: bold;\n}\n\n.xr-var-list,\n.xr-var-item {\n  display: contents;\n}\n\n.xr-var-item > div,\n.xr-var-item label,\n.xr-var-item > .xr-var-name span {\n  background-color: var(--xr-background-color-row-even);\n  margin-bottom: 0;\n}\n\n.xr-var-item > .xr-var-name:hover span {\n  padding-right: 5px;\n}\n\n.xr-var-list > li:nth-child(odd) > div,\n.xr-var-list > li:nth-child(odd) > label,\n.xr-var-list > li:nth-child(odd) > .xr-var-name span {\n  background-color: var(--xr-background-color-row-odd);\n}\n\n.xr-var-name {\n  grid-column: 1;\n}\n\n.xr-var-dims {\n  grid-column: 2;\n}\n\n.xr-var-dtype {\n  grid-column: 3;\n  text-align: right;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-preview {\n  grid-column: 4;\n}\n\n.xr-index-preview {\n  grid-column: 2 / 5;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-name,\n.xr-var-dims,\n.xr-var-dtype,\n.xr-preview,\n.xr-attrs dt {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-right: 10px;\n}\n\n.xr-var-name:hover,\n.xr-var-dims:hover,\n.xr-var-dtype:hover,\n.xr-attrs dt:hover {\n  overflow: visible;\n  width: auto;\n  z-index: 1;\n}\n\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  display: none;\n  background-color: var(--xr-background-color) !important;\n  padding-bottom: 5px !important;\n}\n\n.xr-var-attrs-in:checked ~ .xr-var-attrs,\n.xr-var-data-in:checked ~ .xr-var-data,\n.xr-index-data-in:checked ~ .xr-index-data {\n  display: block;\n}\n\n.xr-var-data > table {\n  float: right;\n}\n\n.xr-var-name span,\n.xr-var-data,\n.xr-index-name div,\n.xr-index-data,\n.xr-attrs {\n  padding-left: 25px !important;\n}\n\n.xr-attrs,\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  grid-column: 1 / -1;\n}\n\ndl.xr-attrs {\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: 125px auto;\n}\n\n.xr-attrs dt,\n.xr-attrs dd {\n  padding: 0;\n  margin: 0;\n  float: left;\n  padding-right: 10px;\n  width: auto;\n}\n\n.xr-attrs dt {\n  font-weight: normal;\n  grid-column: 1;\n}\n\n.xr-attrs dt:hover span {\n  display: inline-block;\n  background: var(--xr-background-color);\n  padding-right: 10px;\n}\n\n.xr-attrs dd {\n  grid-column: 2;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n.xr-icon-database,\n.xr-icon-file-text2,\n.xr-no-icon {\n  display: inline-block;\n  vertical-align: middle;\n  width: 1em;\n  height: 1.5em !important;\n  stroke-width: 0;\n  stroke: currentColor;\n  fill: currentColor;\n}\n</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 19MB\nDimensions:      (y: 1418, x: 2742)\nCoordinates:\n  * y            (y) float64 11kB 3.799e+06 3.799e+06 ... 3.757e+06 3.757e+06\n  * x            (x) float64 22kB 3.344e+05 3.344e+05 ... 4.166e+05 4.166e+05\n    time         datetime64[ns] 8B 2025-02-23T18:28:13.651369\n    spatial_ref  int64 8B 0\nData variables:\n    red          (y, x) bool 4MB False False False False ... False False False\n    green        (y, x) bool 4MB False False False False ... False False False\n    blue         (y, x) bool 4MB False False False False ... False False False\n    nir08        (y, x) bool 4MB False False False False ... False False False\n    swir22       (y, x) bool 4MB False False False False ... False False False</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-c8419164-bb04-4830-a334-ab81afeaa1a4' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-c8419164-bb04-4830-a334-ab81afeaa1a4' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>y</span>: 1418</li><li><span class='xr-has-index'>x</span>: 2742</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-113b3e88-dcc2-4ff4-87f6-d0965c1e8a3e' class='xr-section-summary-in' type='checkbox'  checked><label for='section-113b3e88-dcc2-4ff4-87f6-d0965c1e8a3e' class='xr-section-summary' >Coordinates: <span>(4)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>y</span></div><div class='xr-var-dims'>(y)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>3.799e+06 3.799e+06 ... 3.757e+06</div><input id='attrs-0824546b-840e-417b-af39-a7c5a7afc766' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-0824546b-840e-417b-af39-a7c5a7afc766' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-57e6faef-09d2-4b36-a4ab-fceffbda2655' class='xr-var-data-in' type='checkbox'><label for='data-57e6faef-09d2-4b36-a4ab-fceffbda2655' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>metre</dd><dt><span>resolution :</span></dt><dd>-30.0</dd><dt><span>crs :</span></dt><dd>EPSG:32611</dd><dt><span>axis :</span></dt><dd>Y</dd><dt><span>long_name :</span></dt><dd>y coordinate of projection</dd><dt><span>standard_name :</span></dt><dd>projection_y_coordinate</dd></dl></div><div class='xr-var-data'><pre>array([3799050., 3799020., 3798990., ..., 3756600., 3756570., 3756540.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>x</span></div><div class='xr-var-dims'>(x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>3.344e+05 3.344e+05 ... 4.166e+05</div><input id='attrs-123c79b6-5fc7-4eea-aacf-275de5c42d0a' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-123c79b6-5fc7-4eea-aacf-275de5c42d0a' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-83b19c3a-a75f-4232-b69f-833ca921de38' class='xr-var-data-in' type='checkbox'><label for='data-83b19c3a-a75f-4232-b69f-833ca921de38' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>metre</dd><dt><span>resolution :</span></dt><dd>30.0</dd><dt><span>crs :</span></dt><dd>EPSG:32611</dd><dt><span>axis :</span></dt><dd>X</dd><dt><span>long_name :</span></dt><dd>x coordinate of projection</dd><dt><span>standard_name :</span></dt><dd>projection_x_coordinate</dd></dl></div><div class='xr-var-data'><pre>array([334410., 334440., 334470., ..., 416580., 416610., 416640.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>time</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2025-02-23T18:28:13.651369</div><input id='attrs-526a3c53-2005-4d83-838c-26c05ab105c1' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-526a3c53-2005-4d83-838c-26c05ab105c1' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d9e3248d-6300-413a-a948-abaf4e98aa50' class='xr-var-data-in' type='checkbox'><label for='data-d9e3248d-6300-413a-a948-abaf4e98aa50' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array(&#x27;2025-02-23T18:28:13.651369000&#x27;, dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>spatial_ref</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0</div><input id='attrs-cf0cde71-6fe7-4ba3-935b-4671a7f40973' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-cf0cde71-6fe7-4ba3-935b-4671a7f40973' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-8e5b5e5d-6d2c-4b82-af00-bd60d506f022' class='xr-var-data-in' type='checkbox'><label for='data-8e5b5e5d-6d2c-4b82-af00-bd60d506f022' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>crs_wkt :</span></dt><dd>PROJCS[&quot;WGS 84 / UTM zone 11N&quot;,GEOGCS[&quot;WGS 84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563,AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.0174532925199433,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]],PROJECTION[&quot;Transverse_Mercator&quot;],PARAMETER[&quot;latitude_of_origin&quot;,0],PARAMETER[&quot;central_meridian&quot;,-117],PARAMETER[&quot;scale_factor&quot;,0.9996],PARAMETER[&quot;false_easting&quot;,500000],PARAMETER[&quot;false_northing&quot;,0],UNIT[&quot;metre&quot;,1,AUTHORITY[&quot;EPSG&quot;,&quot;9001&quot;]],AXIS[&quot;Easting&quot;,EAST],AXIS[&quot;Northing&quot;,NORTH],AUTHORITY[&quot;EPSG&quot;,&quot;32611&quot;]]</dd><dt><span>semi_major_axis :</span></dt><dd>6378137.0</dd><dt><span>semi_minor_axis :</span></dt><dd>6356752.314245179</dd><dt><span>inverse_flattening :</span></dt><dd>298.257223563</dd><dt><span>reference_ellipsoid_name :</span></dt><dd>WGS 84</dd><dt><span>longitude_of_prime_meridian :</span></dt><dd>0.0</dd><dt><span>prime_meridian_name :</span></dt><dd>Greenwich</dd><dt><span>geographic_crs_name :</span></dt><dd>WGS 84</dd><dt><span>horizontal_datum_name :</span></dt><dd>World Geodetic System 1984</dd><dt><span>projected_crs_name :</span></dt><dd>WGS 84 / UTM zone 11N</dd><dt><span>grid_mapping_name :</span></dt><dd>transverse_mercator</dd><dt><span>latitude_of_projection_origin :</span></dt><dd>0.0</dd><dt><span>longitude_of_central_meridian :</span></dt><dd>-117.0</dd><dt><span>false_easting :</span></dt><dd>500000.0</dd><dt><span>false_northing :</span></dt><dd>0.0</dd><dt><span>scale_factor_at_central_meridian :</span></dt><dd>0.9996</dd><dt><span>spatial_ref :</span></dt><dd>PROJCS[&quot;WGS 84 / UTM zone 11N&quot;,GEOGCS[&quot;WGS 84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563,AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.0174532925199433,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]],PROJECTION[&quot;Transverse_Mercator&quot;],PARAMETER[&quot;latitude_of_origin&quot;,0],PARAMETER[&quot;central_meridian&quot;,-117],PARAMETER[&quot;scale_factor&quot;,0.9996],PARAMETER[&quot;false_easting&quot;,500000],PARAMETER[&quot;false_northing&quot;,0],UNIT[&quot;metre&quot;,1,AUTHORITY[&quot;EPSG&quot;,&quot;9001&quot;]],AXIS[&quot;Easting&quot;,EAST],AXIS[&quot;Northing&quot;,NORTH],AUTHORITY[&quot;EPSG&quot;,&quot;32611&quot;]]</dd></dl></div><div class='xr-var-data'><pre>array(0)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-9b87ef88-ae23-46e9-bd0a-a66944d7b5bc' class='xr-section-summary-in' type='checkbox'  checked><label for='section-9b87ef88-ae23-46e9-bd0a-a66944d7b5bc' class='xr-section-summary' >Data variables: <span>(5)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>red</span></div><div class='xr-var-dims'>(y, x)</div><div class='xr-var-dtype'>bool</div><div class='xr-var-preview xr-preview'>False False False ... False False</div><input id='attrs-9e208dd8-917f-4170-93bb-5a9f4db314ec' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-9e208dd8-917f-4170-93bb-5a9f4db314ec' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-de23045a-0ae0-4423-a2a1-e3f5feb31e92' class='xr-var-data-in' type='checkbox'><label for='data-de23045a-0ae0-4423-a2a1-e3f5feb31e92' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>grid_mapping :</span></dt><dd>spatial_ref</dd></dl></div><div class='xr-var-data'><pre>array([[False, False, False, ..., False, False, False],\n       [False, False, False, ..., False, False, False],\n       [False, False, False, ..., False, False, False],\n       ...,\n       [False, False, False, ..., False, False, False],\n       [False, False, False, ..., False, False, False],\n       [False, False, False, ..., False, False, False]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>green</span></div><div class='xr-var-dims'>(y, x)</div><div class='xr-var-dtype'>bool</div><div class='xr-var-preview xr-preview'>False False False ... False False</div><input id='attrs-94961bbf-8703-4298-960c-50d8eb782860' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-94961bbf-8703-4298-960c-50d8eb782860' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-e460b9f6-2a27-4966-a6e7-c4675805cdae' class='xr-var-data-in' type='checkbox'><label for='data-e460b9f6-2a27-4966-a6e7-c4675805cdae' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>grid_mapping :</span></dt><dd>spatial_ref</dd></dl></div><div class='xr-var-data'><pre>array([[False, False, False, ..., False, False, False],\n       [False, False, False, ..., False, False, False],\n       [False, False, False, ..., False, False, False],\n       ...,\n       [False, False, False, ..., False, False, False],\n       [False, False, False, ..., False, False, False],\n       [False, False, False, ..., False, False, False]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>blue</span></div><div class='xr-var-dims'>(y, x)</div><div class='xr-var-dtype'>bool</div><div class='xr-var-preview xr-preview'>False False False ... False False</div><input id='attrs-34b220b6-531b-48fc-b4ef-52415cf57019' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-34b220b6-531b-48fc-b4ef-52415cf57019' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-90d02435-6dc5-4cad-9127-cc9157613f4e' class='xr-var-data-in' type='checkbox'><label for='data-90d02435-6dc5-4cad-9127-cc9157613f4e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>grid_mapping :</span></dt><dd>spatial_ref</dd></dl></div><div class='xr-var-data'><pre>array([[False, False, False, ..., False, False, False],\n       [False, False, False, ..., False, False, False],\n       [False, False, False, ..., False, False, False],\n       ...,\n       [False, False, False, ..., False, False, False],\n       [False, False, False, ..., False, False, False],\n       [False, False, False, ..., False, False, False]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>nir08</span></div><div class='xr-var-dims'>(y, x)</div><div class='xr-var-dtype'>bool</div><div class='xr-var-preview xr-preview'>False False False ... False False</div><input id='attrs-dd25098c-4bb2-4785-a30c-6fc79a3f2f54' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-dd25098c-4bb2-4785-a30c-6fc79a3f2f54' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-8cc53eb6-a51c-4deb-a01a-22196f96057c' class='xr-var-data-in' type='checkbox'><label for='data-8cc53eb6-a51c-4deb-a01a-22196f96057c' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>grid_mapping :</span></dt><dd>spatial_ref</dd></dl></div><div class='xr-var-data'><pre>array([[False, False, False, ..., False, False, False],\n       [False, False, False, ..., False, False, False],\n       [False, False, False, ..., False, False, False],\n       ...,\n       [False, False, False, ..., False, False, False],\n       [False, False, False, ..., False, False, False],\n       [False, False, False, ..., False, False, False]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>swir22</span></div><div class='xr-var-dims'>(y, x)</div><div class='xr-var-dtype'>bool</div><div class='xr-var-preview xr-preview'>False False False ... False False</div><input id='attrs-b6b4df09-b8d9-488d-a218-23a1b3455d40' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-b6b4df09-b8d9-488d-a218-23a1b3455d40' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-8fe69b98-aa0d-4e6c-a3bf-6f8f3c772777' class='xr-var-data-in' type='checkbox'><label for='data-8fe69b98-aa0d-4e6c-a3bf-6f8f3c772777' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>grid_mapping :</span></dt><dd>spatial_ref</dd></dl></div><div class='xr-var-data'><pre>array([[False, False, False, ..., False, False, False],\n       [False, False, False, ..., False, False, False],\n       [False, False, False, ..., False, False, False],\n       ...,\n       [False, False, False, ..., False, False, False],\n       [False, False, False, ..., False, False, False],\n       [False, False, False, ..., False, False, False]])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-f833540d-e567-4b9b-8779-694a5fb8f486' class='xr-section-summary-in' type='checkbox'  ><label for='section-f833540d-e567-4b9b-8779-694a5fb8f486' class='xr-section-summary' >Indexes: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>y</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-63aba70a-fdc6-435a-b65d-0f625a190beb' class='xr-index-data-in' type='checkbox'/><label for='index-63aba70a-fdc6-435a-b65d-0f625a190beb' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([3799050.0, 3799020.0, 3798990.0, 3798960.0, 3798930.0, 3798900.0,\n       3798870.0, 3798840.0, 3798810.0, 3798780.0,\n       ...\n       3756810.0, 3756780.0, 3756750.0, 3756720.0, 3756690.0, 3756660.0,\n       3756630.0, 3756600.0, 3756570.0, 3756540.0],\n      dtype=&#x27;float64&#x27;, name=&#x27;y&#x27;, length=1418))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>x</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-2ad619bd-0bca-445d-8e30-4e3fc79b77aa' class='xr-index-data-in' type='checkbox'/><label for='index-2ad619bd-0bca-445d-8e30-4e3fc79b77aa' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([334410.0, 334440.0, 334470.0, 334500.0, 334530.0, 334560.0, 334590.0,\n       334620.0, 334650.0, 334680.0,\n       ...\n       416370.0, 416400.0, 416430.0, 416460.0, 416490.0, 416520.0, 416550.0,\n       416580.0, 416610.0, 416640.0],\n      dtype=&#x27;float64&#x27;, name=&#x27;x&#x27;, length=2742))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-d6718430-5005-432a-8b2f-2cf95a7dcf28' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-d6718430-5005-432a-8b2f-2cf95a7dcf28' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div>\n```\n:::\n:::\n\n\n::: {#c8eb6abc .cell execution_count=11}\n``` {.python .cell-code}\n# Substitute nan values with 0\nlandsat = landsat.fillna(0)\n```\n:::\n\n\n::: {#d7883243 .cell execution_count=12}\n``` {.python .cell-code}\n# Check for nan values in each column to ensure it worked\nfor band in landsat.data_vars:\n    print(band, landsat[band].isnull().any().item())\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nred False\ngreen False\nblue False\nnir08 False\nswir22 False\n```\n:::\n:::\n\n\n::: {#66c08e47 .cell execution_count=13}\n``` {.python .cell-code}\n# Plot new true color image with cleaned array\nlandsat[[\"red\", \"green\", \"blue\"]].to_array().plot.imshow(vmin = 7000, vmax = 15000)\n```\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-14-output-1.png){width=621 height=464}\n:::\n:::\n\n\nThe cleaned rendering highlights the burn scars more clearly and keeps the brightness range consistent.\n\n### False-Color Burn Severity Map\n\nWe switch to a SWIR–NIR–Red combination to emphasize burned ground versus intact vegetation, then overlay the fire perimeters.\n\n::: {#72ab8fff .cell execution_count=14}\n``` {.python .cell-code}\n# Plot false color image by plotting\nlandsat[[\"swir22\", \"nir08\", \"red\"]].to_array().plot.imshow(vmin = 7000, vmax = 15000)\n```\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-15-output-1.png){width=621 height=464}\n:::\n:::\n\n\n::: {#5aa2a73e .cell execution_count=15}\n``` {.python .cell-code}\n# Double check CRS of perimeter data\npalisades = palisades.to_crs(landsat.rio.crs)\neaton = eaton.to_crs(landsat.rio.crs)\n\n# Create the false color image from Landsat\nfig, ax = plt.subplots(figsize=(10, 10))\n\nlandsat[[\"swir22\", \"nir08\", \"red\"]].to_array().plot.imshow(\n    ax=ax,\n    vmin=7000,\n    vmax=15000\n)\n\n# Plot fire perimeter polygons on top of the  image\npalisades.boundary.plot(ax=ax, color=\"red\", linewidth=1)\neaton.boundary.plot(ax=ax, color=\"red\", linewidth=1)\n\n# Set center points of each perimeter\np_center = palisades.geometry.centroid.iloc[0]\ne_center = eaton.geometry.centroid.iloc[0]\n\n# Add labels for each fire\nax.text(p_center.x, p_center.y, \"Palisades Fire\",\n        color=\"black\", fontsize=10, \n        ha=\"left\", va=\"center\")\n\nax.text(e_center.x, e_center.y, \"Eaton Fire\",\n        color=\"black\", fontsize=10,\n        ha=\"right\", va=\"center\")\n\n# Add axis labels and title\n\nax.set_xlabel(\"X coordinate (meters)\")\nax.set_ylabel(\"Y coordinate (meters)\")\nax.set_title(\"Landsat false color image with Palisades & Eaton Fire Perimeters\")\n\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-16-output-1.png){width=829 height=465}\n:::\n:::\n\n\nSWIR–NIR–red composites render burned areas in red hues and healthy vegetation in greens, so the perimeter overlays become immediately interpretable.\n\n## Environmental Justice Context\n\nWe now pull in the Environmental Justice Index (EJI) geodatabase, align CRS, and prepare tract-level subsets for each perimeter.\n\n::: {#5a8a7d8e .cell tags='[]' execution_count=16}\n``` {.python .cell-code}\neji = gpd.read_file(\"~/Desktop/MEDS/lucianbluescher.github.io/posts/220final_LAfires_AZbiodiversity_blog/data/EJI_2024_California/EJI_2024_California.gdb\")\n```\n:::\n\n\n::: {#b1f89d49 .cell tags='[]' execution_count=17}\n``` {.python .cell-code}\neji = eji.to_crs(palisades.crs)\n```\n:::\n\n\n\n::: {#f5baa849 .cell tags='[]' execution_count=19}\n``` {.python .cell-code}\neji.crs\n```\n\n::: {.cell-output .cell-output-display execution_count=18}\n```\n<Projected CRS: EPSG:32611>\nName: WGS 84 / UTM zone 11N\nAxis Info [cartesian]:\n- [east]: Easting (metre)\n- [north]: Northing (metre)\nArea of Use:\n- undefined\nCoordinate Operation:\n- name: UTM zone 11N\n- method: Transverse Mercator\nDatum: World Geodetic System 1984\n- Ellipsoid: WGS 84\n- Prime Meridian: Greenwich\n```\n:::\n:::\n\n\n::: {#0bdb0aca .cell tags='[]' execution_count=20}\n``` {.python .cell-code}\npalisades.crs\n```\n\n::: {.cell-output .cell-output-display execution_count=19}\n```\n<Projected CRS: EPSG:32611>\nName: WGS 84 / UTM zone 11N\nAxis Info [cartesian]:\n- [east]: Easting (metre)\n- [north]: Northing (metre)\nArea of Use:\n- undefined\nCoordinate Operation:\n- name: UTM zone 11N\n- method: Transverse Mercator\nDatum: World Geodetic System 1984\n- Ellipsoid: WGS 84\n- Prime Meridian: Greenwich\n```\n:::\n:::\n\n\n::: {#4983ace6 .cell tags='[]' execution_count=21}\n``` {.python .cell-code}\ntype(eji)\n```\n\n::: {.cell-output .cell-output-display execution_count=20}\n```\ngeopandas.geodataframe.GeoDataFrame\n```\n:::\n:::\n\n\n::: {#c8a35955 .cell tags='[]' execution_count=22}\n``` {.python .cell-code}\ntype(palisades)\n```\n\n::: {.cell-output .cell-output-display execution_count=21}\n```\ngeopandas.geodataframe.GeoDataFrame\n```\n:::\n:::\n\n\n### Tract Selection and Visualization\n\nSpatial joins isolate the tracts intersecting each fire perimeter. We plot them to confirm the selections before moving to poverty metrics.\n\n::: {#a2ad66e4 .cell tags='[]' execution_count=23}\n``` {.python .cell-code}\neji_pali = gpd.sjoin(eji, palisades, predicate = 'intersects')\n```\n:::\n\n\n::: {#c4889b38 .cell tags='[]' execution_count=24}\n``` {.python .cell-code}\nfig, ax = plt.subplots()\n    \neji_pali.plot(ax = ax,\n                column = 'TRACTCE',\n                cmap = 'Dark2',\n                legend = True)\n    \npalisades.plot(ax = ax,\n               color = 'none')\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-25-output-1.png){width=588 height=420}\n:::\n:::\n\n\n::: {#a9ff3821 .cell tags='[]' execution_count=25}\n``` {.python .cell-code}\neji_eat = gpd.sjoin(eji, eaton, predicate = 'intersects')\n```\n:::\n\n\n::: {#f22439f0 .cell tags='[]' execution_count=26}\n``` {.python .cell-code}\nfig, ax = plt.subplots()\n    \neji_eat.plot(ax = ax,\n                column = 'TRACTCE',\n                cmap = 'Dark2',\n                legend = True)\n    \neaton.plot(ax = ax,\n               color = 'none')\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-27-output-1.png){width=588 height=398}\n:::\n:::\n\n\n::: {#8eb44b9a .cell tags='[]' execution_count=27}\n``` {.python .cell-code}\npalisades_clip = gpd.clip(eji_pali, palisades)\neaton_clip = gpd.clip(eji_eat, eaton)\n```\n:::\n\n\n::: {#e3c45966 .cell tags='[]' execution_count=28}\n``` {.python .cell-code}\nfig, ax = plt.subplots()\n    \neaton_clip.plot(ax = ax,\n                column = 'TRACTCE',\n                cmap = 'Dark2',\n                legend = True)\n    \neaton.plot(ax = ax,\n               color = 'none')\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-29-output-1.png){width=588 height=398}\n:::\n:::\n\n\n::: {#4afaed71 .cell tags='[]' execution_count=29}\n``` {.python .cell-code}\nfig, ax = plt.subplots(1, 1, figsize=(14, 12))\n\n# Add basemap using contextily\nctx.add_basemap(ax, source=ctx.providers.OpenStreetMap.Mapnik)\n\n# ADD FIRE PERIMETERS: UPDATE FILL TRANSPARENCY AND COLOR\neaton.plot(ax = ax,\n               color = 'none')\n\n# ADD LEGEND OR ANNOTATION TO IDENTIFY EACH FIRE\n\n# ADD TITLE\n\nax.axis('off')\n\nplt.tight_layout()\n#plt.show()\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n/opt/anaconda3/envs/eds220-env/lib/python3.11/site-packages/contextily/tile.py:645: UserWarning: The inferred zoom level of 27 is not valid for the current tile provider (valid zooms: 0 - 19).\n  warnings.warn(msg)\n```\n:::\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-30-output-2.png){width=1142 height=1142}\n:::\n:::\n\n\nFinally we compare poverty exposure (`E_POV200`) for the tracts inside each perimeter using a shared legend range.\n\n::: {#32bf678e .cell tags='[]' execution_count=30}\n``` {.python .cell-code}\nfig, (ax1, ax2) = plt.subplots(1, 2, figsize=(30, 10))\n\n# UPDATE WITH YOU EJI VARIABLE FROM STEP 1\neji_variable = 'E_POV200' # percentage of persons with income below 200% of federal poverty level\ncensus_within_palisades = palisades_clip\ncensus_within_eaton = eaton_clip\n\n# Find common min/max for legend range\nvmin = min(census_within_palisades[eji_variable].min(), census_within_eaton[eji_variable].min())\nvmax = max(census_within_palisades[eji_variable].max(), census_within_eaton[eji_variable].max())\n\n# Plot census tracts within Palisades perimeter\ncensus_within_palisades.plot(\n    column= eji_variable,\n    vmin=vmin, vmax=vmax,\n    legend=False,\n    ax=ax1,\n)\nax1.set_title('Palisades Fire Area')\nax1.axis('off')\n\n# Plot census tracts within Eaton perimeter\ncensus_within_eaton.plot(\n    column=eji_variable,\n    vmin=vmin, vmax=vmax,\n    legend=False,\n    ax=ax2,\n)\nax2.set_title('Eaton Fire Area')\nax2.axis('off')\n\n# Add overall title\nfig.suptitle('Palisades and Eaton fire comparison - Fire Areas Comparison')\n\n# Add shared colorbar at the bottom\nsm = plt.cm.ScalarMappable( norm=plt.Normalize(vmin=vmin, vmax=vmax))\ncbar_ax = fig.add_axes([0.25, 0.08, 0.5, 0.02])  # [left, bottom, width, height]\ncbar = fig.colorbar(sm, cax=cbar_ax, orientation='horizontal')\ncbar.set_label('Percentage of Low income Persons')\n\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-31-output-1.png){width=2251 height=924}\n:::\n:::\n\n\nThese joins reveal that both fire scars overlap tracts with elevated poverty scores, underscoring the importance of tailoring recovery resources to vulnerable communities.\n\n## Final Visualizations and Takeaways\n\n1. **True-color Landsat composite** — baseline context for the Angeles National Forest canopy before highlighting change.  \n2. **False-color SWIR/NIR composite with perimeter overlays** — pinpoints burn severity differences between Eaton and Palisades.  \n3. **EJI poverty comparison plots** — show how each footprint intersects low-income census tracts, guiding equity-focused recovery planning.\n\nAfter reviewing the visuals, the key takeaway is that burn severity and social vulnerability align across multiple tracts, implying that remote sensing plus equity data should inform targeted mitigation and aid deployment.\n\n",
    "supporting": [
      "index_files/figure-html"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js\" integrity=\"sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js\" integrity=\"sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}