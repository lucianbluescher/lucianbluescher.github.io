{
  "hash": "f7f53e06cc6548e1aaa3131cae57e275",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"LA Fires\"\ndescription: \"Remote sensing and equity insights for the 2025 Eaton and Palisades wildfires.\"\nauthor: \n  - name: Lucian Blue Scher\n    url: https://lucianbluescher.github.io\n    affiliation: Master of Environmental Data Science Program @ The Bren School (UCSB) \n    affiliation-url: https://ucsb-meds.github.io/ \ndate: 12-12-2025\ncategories: [MEDS, R, Python]\nimage: images/landsat_false_perimeter.png\nbibliography: references.bib\ncode-fold: true\neditor_options: \n  chunk_output_type: inline\njupyter: eds220-env\nexecute:\n  kernel: eds220-env\n  python:\n    path: /opt/anaconda3/envs/eds220-env/bin/python\n---\n\n[Full analysis on GitHub](https://github.com/lucianbluescher/eds220-hwk4)\n\n# About\n\n## Purpose\n\nThe Eaton and Palisades Fires reshaped large swaths of the Los Angeles foothills in early 2025. This post summarizes a remote-sensing workflow that converts Landsat 8 surface reflectance into both true- and false-color composites, overlays official fire perimeters, and links the impacted footprints to the EPA’s Environmental Justice Index (EJI) to highlight socially vulnerable neighborhoods caught within the burn scars.\n\n![](images/landsat_false_perimeter.png){fig-alt=\"False color map of the Los Angeles area highlighting Eaton and Palisades fire perimeters\"}\n\n## Highlights\n\n-   Fire perimeter processing and Landsat feature engineering using `pandas`, `geopandas`, `numpy`, and `xarray`.\n-   CRS restoration and reprojection to align raster and vector assets for accurate overlays.\n-   True- and false-color visualization with `matplotlib`, emphasizing burn severity via SWIR/NIR combinations.\n-   Environmental Justice Index joins that compare poverty exposure inside each fire footprint.\n\n## Datasets\n\n1)  Palisades & Eaton dissolved fire perimeters from FIRIS (Los Angeles County NIFC) via [ArcGIS Online](https://egis-lacounty.hub.arcgis.com/maps/ad51845ea5fb4eb483bc2a7c38b2370c/about) delineating burn footprints for analysis. (accessed 2025-12-22)\n\n2)  Landsat 8 Collection 2 Level-2 surface reflectance (RGB, NIR, SWIR) from [Microsoft Planetary Computer](https://planetarycomputer.microsoft.com/dataset/landsat-c2-l2); clipped to the study area for land-surface and post-fire change detection. (accessed 2025-11-22)\n\n3)  The Environmental Justice Index (EJI) data set from the [Agency for Toxic Substances and Disease Registry](https://www.atsdr.cdc.gov/place-health/php/eji/eji-data-download.html) (ATSDR) provides downloadable environmental justice indicators, combining environmental burdens with social and health factors at the community level. (accessed 2025-11-22)\n\n## References\n\nData:\n\n\\[1\\] Palisades and Eaton Dissolved Fire Perimeters (2025). (2025). Arcgis.com. https://egis-lacounty.hub.arcgis.com/maps/ad51845ea5fb4eb483bc2a7c38b2370c/about\n\n‌\\[2\\] Microsoft Planetary Computer. (2025). Microsoft.com. https://planetarycomputer.microsoft.com/dataset/landsat-c2-l2\n\n\\[3\\] CDC. (2024, December 3). EJI Data Download. Place and Health - Geospatial Research, Analysis, and Services Program (GRASP). https://www.atsdr.cdc.gov/place-health/php/eji/eji-data-download.html\n\nBackground information and Landsat band combinations:\n\n\\[3\\] Why is that Forest Red and That Cloud Blue? (2014, March 4). Nasa.gov; NASA Earth Observatory. https://earthobservatory.nasa.gov/features/FalseColor\n\n\\[4\\] What are the band designations for the Landsat satellites? (2025, July 11). USGS. https://www.usgs.gov/faqs/what-are-band-designations-landsat-satellites\n\n\\[5\\] Common Landsat Band Combinations. (2021, November 12). USGS. https://www.usgs.gov/media/images/common-landsat-band-combinations\n\n## Analysis Overview\n\n### Setup\n\nWe load the Python libraries used for tabular wrangling, geospatial analysis, and visualization.\n\n::: {#b2686f26 .cell execution_count=1}\n``` {.python .cell-code}\nimport pandas as pd\nimport numpy as np\nimport os\nimport geopandas as gpd\nimport xarray as xr\nimport matplotlib as mpl\nimport matplotlib.pyplot as plt\nimport contextily as ctx\n```\n:::\n\n\nNext we read the Eaton and Palisades perimeter shapefiles plus the clipped Landsat NetCDF scene.\n\n::: {#954c0d44 .cell execution_count=2}\n``` {.python .cell-code}\nfp = os.path.join('data', 'Eaton_Perimeter_20250121', 'Eaton_Perimeter_20250121.shp')\neaton = gpd.read_file(fp)\n\nfp = os.path.join('data', 'Palisades_Perimeter_20250121', 'Palisades_Perimeter_20250121.shp')\npalisades = gpd.read_file(fp)\n\nlandsat = xr.open_dataset(\n    \"data/landsat8-2025-02-23-palisades-eaton.nc\")\n```\n:::\n\n\n### Data Checks and cleaning\n\nWe verify CRS metadata and check that our perimeters are projected.\n\n::: {#26fddb21 .cell execution_count=3}\n``` {.python .cell-code}\n# Fire perimeter data exploration\nprint(f\"The CRS for the Eaton Perimeter is {eaton.crs}\")\nprint(f\"The CRS for the Palisades Perimeter is {palisades.crs}\")\nprint(f\"The Eaton Perimeter is projected: {eaton.crs.is_projected}\")\nprint(f\"The Palisades Perimeter is projected: {palisades.crs.is_projected}\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nThe CRS for the Eaton Perimeter is EPSG:3857\nThe CRS for the Palisades Perimeter is EPSG:3857\nThe Eaton Perimeter is projected: True\nThe Palisades Perimeter is projected: True\n```\n:::\n:::\n\n\nWe wont run this exploration to reduce clutter, but it is important to see what information we are looking for.\n\n::: {#c0b59bf0 .cell execution_count=4}\n``` {.python .cell-code}\nprint(landsat.coords) # View coordinates\nprint(landsat.var)    # View Variables\nprint(landsat.dims)   # View Dimensions  \neaton.info()          # Data summary  \npalisades.info()\n```\n:::\n\n\nBoth perimeters share a projected CRS and schema, while Landsat arrives as an xarray.Dataset with georeferencing stored in `spatial_ref`.\n\nBefore we move on lets check for no-data values in our landsat raster and remove them if they exist, confirming with an `assert`.\n\n::: {#8be7bf92 .cell execution_count=5}\n``` {.python .cell-code}\n# Fill NaNs with zero if any\nif landsat.to_array().isnull().any():\n    landsat = landsat.fillna(0)\n\n# Assert no NaNs remain\nassert not landsat.to_array().isnull().any(), \"NaNs remain after fill.\"\n```\n:::\n\n\n### Restoring Raster CRS Metadata\n\nBecause `xarray` sometimes drops CRS info, we explicitly write it back so raster/vector overlays align perfectly.\n\n\n::: {#336691f7 .cell execution_count=7}\n``` {.python .cell-code}\n# Get the CRS of landsat\nlandsat_crs = landsat.spatial_ref.crs_wkt\n\n# Recover the geospatial information by using rio.write_crs() \nlandsat = landsat.rio.write_crs(landsat_crs)\n\n# Print the CRS of the updated dataset.\nprint(landsat.rio.crs)\n\n# Let's also match our fire perimeter data to the landsat crs\npalisades = palisades.to_crs(landsat.rio.crs)\neaton     = eaton.to_crs(landsat.rio.crs)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nEPSG:32611\n```\n:::\n:::\n\n\n### True-Color image Rendering\n\nWe build a true-color Landsat image by stacking the red, green, and blue bands, then filling no-data again to be certain. Casting to a float ensures safe color scaling. We stretch the colormap (vmin=8200, vmax=13500) to brighten the scene to more clearly show burn scars, but the scars still show up as subtle dark patches against the surrounding vegetation.\n\n::: {#174718cb .cell execution_count=8}\n``` {.python .cell-code}\n# Build and clean RGB\nrgb = landsat[[\"red\", \"green\", \"blue\"]].to_array()\nrgb = rgb.where(np.isfinite(rgb), 0).astype(float)\n\nfig, ax = plt.subplots(figsize=(8, 8))\n_ = rgb.plot.imshow(\n    ax=ax,\n    vmin=8200, vmax=13500,\n    robust=True,\n    add_colorbar=False\n)\n\n# Overlays\npalisades.boundary.plot(ax=ax, color=\"red\", linewidth=1)\neaton.boundary.plot(ax=ax, color=\"red\", linewidth=1)\n\n# Labels\np_center = palisades.geometry.centroid.iloc[0]\ne_center = eaton.geometry.centroid.iloc[0]\ndx, dy = 100, -5000\nax.text(p_center.x + dx, p_center.y + dy, \"Palisades Fire\",\n        color=\"black\", fontsize=10, ha=\"left\", va=\"center\",\n        bbox=dict(facecolor=\"white\", edgecolor=\"black\", boxstyle=\"round,pad=0.2\", alpha=0.8))\nax.text(e_center.x + dx, e_center.y + dy, \"Eaton Fire\",\n        color=\"black\", fontsize=10, ha=\"left\", va=\"center\",\n        bbox=dict(facecolor=\"white\", edgecolor=\"black\", boxstyle=\"round,pad=0.2\", alpha=0.8))\n\n# Lock view to the raster extent \nax.set_xlim(float(rgb.x.min()), float(rgb.x.max()))\nax.set_ylim(float(rgb.y.min()), float(rgb.y.max()))\n\nax.set_title(\"Landsat True Color (Palisades/Eaton)\", fontsize=12, fontweight=\"bold\")\nax.set_axis_off()\nplt.tight_layout()\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-9-output-1.png){width=758 height=421}\n:::\n:::\n\n\n### False-Color Burn Severity Map\nIn contrast to the true-color map, a false-color rendering remaps bands to emphasize burn severity: we display SWIR (sensitive to char/ash and soil moisture) as red, NIR (healthy vegetation) as green, and red as blue. This makes burned areas stand out more clearly. We then reproject the fire perimeters to the Landsat CRS, overlay them in red, and label each fire so the false-color composite directly highlights where and how severely the Palisades and Eaton fires affected the landscape.\n\n::: {#50845df7 .cell execution_count=9}\n``` {.python .cell-code}\n# Build false-color stack (SWIR–NIR–Red)\nfci = landsat[[\"swir22\", \"nir08\", \"red\"]].to_array()\nfci = fci.where(np.isfinite(fci), 0).astype(float)\n\nfig, ax = plt.subplots(figsize=(8, 8))\n_ = fci.plot.imshow(\n    ax=ax,\n    vmin=7000,\n    vmax=15000,\n    robust=True,\n    add_colorbar=False\n)\n\n# Overlays\npalisades.boundary.plot(ax=ax, color=\"red\", linewidth=1)\neaton.boundary.plot(ax=ax, color=\"red\", linewidth=1)\n\n# Labels\np_center = palisades.geometry.centroid.iloc[0]\ne_center = eaton.geometry.centroid.iloc[0]\ndx, dy = 100, -5000\nax.text(p_center.x + dx, p_center.y + dy, \"Palisades Fire\",\n        color=\"black\", fontsize=10, ha=\"left\", va=\"center\",\n        bbox=dict(facecolor=\"white\", edgecolor=\"black\", boxstyle=\"round,pad=0.2\", alpha=0.8))\nax.text(e_center.x + dx, e_center.y + dy, \"Eaton Fire\",\n        color=\"black\", fontsize=10, ha=\"left\", va=\"center\",\n        bbox=dict(facecolor=\"white\", edgecolor=\"black\", boxstyle=\"round,pad=0.2\", alpha=0.8))\n\n# Lock view to raster extent\nax.set_xlim(float(fci.x.min()), float(fci.x.max()))\nax.set_ylim(float(fci.y.min()), float(fci.y.max()))\n\nax.set_title(\"Landsat False Color (Palisades/Eaton)\", fontsize=12, fontweight=\"bold\")\nax.set_axis_off()\nplt.tight_layout()\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-10-output-1.png){width=758 height=421}\n:::\n:::\n\n\nSWIR–NIR–red composites render burned areas in red hues and healthy vegetation in greens, so the perimeter overlays become immediately interpretable.\n\n# Environmental Justice Context\n\nWe now pull in the Environmental Justice Index (EJI) geodatabase, align CRS, and prepare tract-level subsets for each perimeter.\n\n### Data\nLet's load our Environmental justice data and match the crs to our fire perimeters.\n\n::: {#df60fe22 .cell execution_count=10}\n``` {.python .cell-code}\neji = gpd.read_file(\"data/EJI_2024_California/EJI_2024_California.gdb\")\n\neji = eji.to_crs(palisades.crs)\nassert eji.crs == eaton.crs\n```\n:::\n\n\n### Polygon intersection\n\n::: {#607888af .cell execution_count=11}\n``` {.python .cell-code}\n# EJI within/overlapping Palisades\neji_pali = gpd.sjoin(\n    eji, palisades[[\"geometry\"]],\n    how=\"inner\", predicate=\"intersects\"\n).drop(columns=[\"index_right\"])\n\n# EJI within/overlapping Eaton\neji_eat = gpd.sjoin(\n    eji, eaton[[\"geometry\"]],\n    how=\"inner\", predicate=\"intersects\"\n).drop(columns=[\"index_right\"])\n```\n:::\n\n\nSpatial joins isolate the tracts intersecting each fire perimeter. We plot them to confirm the selections before moving to poverty metrics.\n\n::: {#25e339eb .cell execution_count=12}\n``` {.python .cell-code}\npalisades_clip = gpd.clip(eji_pali, palisades)\neaton_clip = gpd.clip(eji_eat, eaton)\n```\n:::\n\n\nFinally we compare poverty exposure (`E_POV200`) for the tracts inside each perimeter using a shared legend range.\n\n::: {#d2eef80c .cell execution_count=13}\n``` {.python .cell-code}\neji_variable = \"E_POV200\"\nvmin = min(palisades_clip[eji_variable].min(), eaton_clip[eji_variable].min())\nvmax = max(palisades_clip[eji_variable].max(), eaton_clip[eji_variable].max())\ncmap = mpl.colormaps[\"YlGnBu\"]\n\nfig, (ax1, ax2) = plt.subplots(\n    1, 2, figsize=(9, 6.5), constrained_layout=True  # narrower width\n)\n\n# Palisades\npalisades_clip.plot(\n    column=eji_variable, cmap=cmap, vmin=vmin, vmax=vmax,\n    linewidth=0.4, edgecolor=\"0.6\", legend=False, ax=ax1\n)\nax1.set_title(\"Palisades Fire Area\", fontsize=13, fontweight=\"bold\")\nax1.axis(\"off\")\n\n# Eaton\neaton_clip.plot(\n    column=eji_variable, cmap=cmap, vmin=vmin, vmax=vmax,\n    linewidth=0.4, edgecolor=\"0.6\", legend=False, ax=ax2\n)\nax2.set_title(\"Eaton Fire Area\", fontsize=13, fontweight=\"bold\")\nax2.axis(\"off\")\n\n# Shared colorbar\nsm = mpl.cm.ScalarMappable(norm=mpl.colors.Normalize(vmin=vmin, vmax=vmax), cmap=cmap)\ncbar = fig.colorbar(sm, ax=[ax1, ax2], orientation=\"horizontal\", fraction=0.05, pad=0.05)\ncbar.set_label(\"Percent of persons below 200% of the federal poverty level\", fontsize=11)\n\n# Titles, pulled down to reduce gap\nfig.suptitle(\"Poverty in Census Tracts intersecting Palisades and Eaton Fires\",\n             fontsize=15, fontweight=\"bold\", y=0.75)\nfig.text(0.5, 0.70,\n         \"Darker blues = higher share of residents below 200% of FPL\",\n         ha=\"center\", va=\"center\", fontsize=11)\n\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-14-output-1.png){width=875 height=482}\n:::\n:::\n\n\nThese joins reveal that both fire scars overlap tracts with elevated poverty scores, underscoring the importance of tailoring recovery resources to vulnerable communities.\n\n## Takeaways\n\n1.  **True-color Landsat composite** — baseline context for the Angeles National Forest canopy before highlighting change.\\\n2.  **False-color SWIR/NIR composite with perimeter overlays** — pinpoints burn severity differences between Eaton and Palisades.\\\n3.  **EJI poverty comparison plots** — show how each footprint intersects low-income census tracts, guiding equity-focused recovery planning.\n\nAfter reviewing the visuals, the key takeaway is that burn severity and social vulnerability align across multiple tracts, implying that remote sensing plus equity data should inform targeted mitigation and aid deployment.\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [],
    "includes": {}
  }
}